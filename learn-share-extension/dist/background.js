(()=>{"use strict";chrome.runtime.onMessage.addListener((function(e,s,r){if("auth"===e.type){console.log("OAuth Token Received:",e.session);var o=e.session.startsWith("?")?e.session:"?".concat(e.session),n=new URLSearchParams(o),t=n.get("oauth_token"),i=n.get("oauth_verifier");return t&&i?chrome.storage.local.set({oauthToken:t,oauthVerifier:i},(function(){chrome.runtime.lastError?(console.error("Error storing tokens:",chrome.runtime.lastError.message),r({success:!1,error:chrome.runtime.lastError.message})):(console.log("Tokens stored successfully!"),r({success:!0}))})):(console.error("Tokens not received properly. Missing values in session string:",o),r({success:!1,error:"Missing oauth_token or oauth_verifier.",session:o})),!0}return console.warn("Unknown message type:",e.type),r({success:!1,error:"Unknown message type."}),!0}))})();